# Операторы цикла

Рассмотрим третью алгоритмическую структуру — цикл. Циклом называется блок кода, который для решения задачи требуется повторить несколько раз.

Каждый цикл состоит из
* блока проверки условия повторения цикла
* тела цикла

Цикл выполняется до тех пор, пока блок проверки условия возвращает истинное значение. Тело цикла содержит последовательность операций, которая выполняется в случае истинного условия повторения цикла. После выполнения последней операции тела цикла снова выполняется операция проверки условия повторения цикла. Если это условие не выполняется, то будет выполнена операция, стоящая непосредственно после цикла в коде программы.

В языке Си следующие виды циклов:

**while** — цикл с предусловием;
**do…while** — цикл с постусловием;
**for** — параметрический цикл (цикл с заданным числом повторений).

## Цикл с предусловием while
```
Общая форма записи
 while (Условие) 
{
  БлокОпераций;
}
```
Если Условие выполняется (выражение, проверяющее Условие, не равно нулю), то выполняется БлокОпераций, заключенный в фигурные скобки, затем Условие проверяется снова. Последовательность действий, состоящая из проверки Условия и выполнения БлокаОпераций, повторяется до тех пор, пока выражение, проверяющее Условие, не станет ложным (равным нулю). При этом происходит выход из цикла, и производится выполнение операции, стоящей после оператора цикла.

Пример: Посчитать сумму чисел от 1 до введенного k
```
#define _CRT_SECURE_NO_WARNINGS // для возможности использования scanf
#include <stdio.h>
int main() {
  int k;  // объявляем целую переменную key
  int i = 1;
  int sum = 0; // начальное значение суммы равно 0
  printf("k = ");
  scanf("%d", &k);   // вводим значение переменной k
  while (i <= k)     // пока i меньше или равно k
  {
    sum = sum + i; // добавляем значение i к сумме
    i++;           // увеличиваем i на 1
  }
  printf("sum = %d\n", sum); // вывод значения суммы
  getchar(); getchar();
  return 0;
}
```
> k = 5
> sum = 15

При построении цикла while, в него необходимо включить конструкции, изменяющие величину проверяемого выражения так, чтобы в конце концов оно стало ложным (равным нулю). Иначе выполнение цикла будет осуществляться бесконечно (бесконечный цикл).

Пример бесконечного цикла
```
while (1) 
{
  БлокОпераций;
}
```
while — цикл с предусловием, поэтому вполне возможно, что тело цикла не будет выполнено ни разу если в момент первой проверки проверяемое условие окажется ложным.

Например, если в приведенном выше коде программы ввести k=-1, то получим результат

> k = -1
> sum = 0

## Цикл с постусловием do...while

Общая форма записи
```
do {
  БлокОпераций;
} while (Условие);
```

Цикл do…while — это цикл с постусловием, где истинность выражения, проверяющего Условие проверяется после выполнения Блока Операций, заключенного в фигурные скобки. Тело цикла выполняется до тех пор, пока выражение, проверяющее Условие, не станет ложным, то есть тело цикла с постусловием выполнится хотя бы один раз.

Использовать цикл do…while лучше в тех случаях, когда должна быть выполнена хотя бы одна итерация, либо когда инициализация объектов, участвующих в проверке условия, происходит внутри тела цикла.

Пример. Проверка, что пользователь ввел число от 0 до 10

```
#define _CRT_SECURE_NO_WARNINGS // для возможности использования scanf
#include <stdio.h>
#include <stdlib.h> // для использования функции system()
int main() 
{
  int num;             // объявляем целую переменную для числа
  system("chcp 1251"); // переходим на русский язык в консоли
  system("cls");       // очищаем экран
  do {
    printf("Введите число от 0 до 10: "); // приглашение пользователю
    scanf("%d", &num); // ввод числа
  } while ((num < 0) || (num > 10)); // повторяем цикл пока num<0 или num>10
  printf("Вы ввели число %d", num); // выводим введенное значение num - от 0 до 10
  getchar(); getchar();
  return 0;
}
```
```
Введите	число от 0	ДО	10:	20
Введите	число от 0	до	10:	34
Введите	число от 0	до	10:	-1
Введите	число от 0	до	10:	-10
Введите	число от 0	ДО	10:	6
Вы ввели число 6
```

## Параметрический цикл for
Общая форма записи
```
 for (Инициализация; Условие; Модификация) 
{
  БлокОпераций;
}
```
for — параметрический цикл (цикл с фиксированным числом повторений). Для организации такого цикла необходимо осуществить три операции:

**Инициализация** — присваивание параметру цикла начального значения;
**Условие** — проверка условия повторения цикла, чаще всего — сравнение величины параметра с некоторым граничным значением;
**Модификация** — изменение значения параметра для следующего прохождения тела цикла.
Эти три операции записываются в скобках и разделяются точкой с запятой ;;. Как правило, параметром цикла является целочисленная переменная.

Инициализация параметра осуществляется только один раз — когда цикл for начинает выполняться.

Проверка Условия повторения цикла осуществляется перед каждым возможным выполнением тела цикла. Когда выражение, проверяющее Условие становится ложным (равным нулю), цикл завершается.

Модификация параметра осуществляется в конце каждого выполнения тела цикла. Параметр может как увеличиваться, так и уменьшаться.

Пример: Посчитать сумму чисел от 1 до введенного k



```
#define _CRT_SECURE_NO_WARNINGS // для возможности использования scanf
#include <stdio.h>
int main() 
{
  int k;  // объявляем целую переменную key
  int sum = 0; // начальное значение суммы равно 0
  printf("k = ");
  scanf("%d", &k);   // вводим значение переменной k
  for(int i=1; i<=k; i++) // цикл для переменной i от 1 до k с шагом 1
  {
    sum = sum + i; // добавляем значение i к сумме
  }
  printf("sum = %d\n", sum); // вывод значения суммы
  getchar(); getchar();
  return 0;
}
```
```
k	=	5
i	=	1	j	=	2
i	=	2	j	=	4
i	=	3	j	=	6
i	=	4	j	=	8
i	=	5	j	=	10
```

## Вложенные циклы
В Си допускаются вложенные циклы, то есть когда один цикл находится внутри другого:
```
 for (i = 0; i<n; i++)  // внешний цикл — Цикл1
{     
  for (j = 0; j<n; j++)   // вложенный цикл — Цикл2
  {
    ;        // блок операций Цикла2
  }
  // блок операций Цикла1;
}
```
Пример: Вывести числа от 0 до 99, по 10 в каждой строке

```
#define _CRT_SECURE_NO_WARNINGS // для возможности использования scanf
#include <stdio.h>
int main() 
{
  for(int i=0; i<10; i++) // цикл для десятков
  {                                  
    for (int j = 0; j < 10; j++) // цикл для единиц
    {
      printf("%2d ", i * 10 + j); // выводим вычисленное число (2 знакоместа) и пробел
    }
    printf("\n"); // во внешнем цикле переводим строку
  }
  getchar(); // scanf() не использовался,
  return 0;  // поэтому консоль можно удержать одним вызовом getchar()
}
```
```
 0  1  2  3  4  5  6  7  8  9
10 11 12 13 14 15 16 17 18 19
20 21 22 23 24 25 26 27 28 29
30 31 32 33 34 35 36 37 38 39
40 41 42 43 44 45 46 47 48 49
50 51 52 53 54 55 56 57 58 59
60 61 62 63 64 65 66 67 68 69
70 71 72 73 74 75 76 77 78 79
80 81 82 83 84 85 86 87 88 89
90 91 92 93 94 95 96 97 98 99
```

## Рекомендации по выбору цикла
При выборе цикла нужно оценить необходимость проверки условия при входе в цикл или по завершении прохождения цикла.

Цикл с постусловием удобно применять в случаях, когда для проверки условия требуется вычислить значение выражения, которое затем будет размещено в теле цикла (см. выше пример ввода числа от 0 до 10).

Цикл c предусловием используется в случае если все переменные, участвующие в выражении, проверяющем условие, проинициализированы заранее, но точное число повторений цикла неизвестно или предполагается сложная модификация переменных, участвующих в формировании условия повторения цикла.

Если цикл ориентирован на работу с параметром, для которого заранее известно число повторений и шаг изменения, то более предпочтительным является параметрический цикл. Очень удобно использовать параметрический цикл при работе с массивами для перебора элементов.

## Операторы прерывания и продолжения цикла break и continue
В теле любого цикла можно использовать операторы

прерывания цикла — break
продолжения цикла — continue.
Оператор break позволяет выйти из цикла, не завершая его.

Оператор continue позволяет пропустить часть операторов тела цикла и начать новую итерацию.

Пример: Вывести числа от 0 до 99 ниже главной диагонали



```
#define _CRT_SECURE_NO_WARNINGS // для возможности использования scanf
#include <stdio.h>
int main() 
{
  for(int i=0; i<10; i++) // цикл для десятков
  {                                  
    for (int j = 0; j < 10; j++) // цикл для единиц
    {
      if (j > i) // если число единиц больше числа десятков в числе
        break; // выходим из вложенного цикла и переходим к новой строке
        printf("%2d ", i * 10 + j); // выводим вычисленное число (2 знакоместа) и пробел
    }
    printf("\n"); // во внешнем цикле переводим строку
  }
  getchar(); // scanf() не использовался,
  return 0;  // поэтому консоль можно удержать одним вызовом getchar()
}
```
```
0
10 11
20 21 22
30 31 32 33
40 41 42 43 44
50 51 52 53 54 55
60 61 62 63 64 65 66
70 71 72 73 74 75 76 77
80 81 82 83 84 85 86 87 88
90 91 92 93 94 95 96 97 98 99
```

Пример: Вывести числа от 0 до 99 исключая числа, оканчивающиеся на 5 или 8
```
#define _CRT_SECURE_NO_WARNINGS // для возможности использования scanf
#include <stdio.h>
int main() 
{
  for(int i=0; i<10; i++) // цикл для десятков
  {                                  
    for (int j = 0; j < 10; j++) // цикл для единиц
    {
      if ((j == 5) || (j == 8)) // если число единиц в числе равно 5 или 8,
        continue;             // переходим к следующей итерации цикла
      printf("%2d ", i * 10 + j); // выводим вычисленное число (2 знакоместа) и пробел
    }
    printf("\n"); // во внешнем цикле переводим строку
  }
  getchar(); // scanf() не использовался,
  return 0;  // поэтому консоль можно удержать одним вызовом getchar()
}
```
```
 0  1  2  3  4  6  7  9
10 11 12 13 14 16 17 19
20 21 22 23 24 26 27 29
30 31 32 33 34 36 37 39
40 41 42 43 44 46 47 49
50 51 52 53 54 56 57 59
60 61 62 63 64 66 67 69
70 71 72 73 74 76 77 79
80 81 82 83 84 86 87 89
90 91 92 93 94 96 97 99
```

При вложенных циклах действия операторов break и continue распространяется только на самую внутреннюю структуру, в которой они содержатся.

## Оператор безусловного перехода goto
Общая форма записи
```
 goto Метка;
. . .
Метка : Операция;
```
Выполнение оператора goto вызывает передачу управления в программе операции, помеченной Меткой.

По сути Метка является идентификатором адреса операции, которой должно быть передано управление.

Для отделения Метки от Операции используется двоеточие — :. Метка может располагаться в программе как до оператора goto, так и после него.

Имена Меток образуются по тем же правилам, что и имена переменных.

Пример: Вывести все целые числа от 5 до 0.



```
#define _CRT_SECURE_NO_WARNINGS // для возможности использования scanf
#include <stdio.h>
int main() 
{
  int k = 5; 
M1: if (k < 0) // если k<0,
    goto M2;   // переходим на метку M2 (выходим из программы)
  printf("%d ", k); // выводим значение k
  k--;              // уменьшаем k на 1
  goto M1;          // переходим на метку M1 (повторяем операции выше)
M2: getchar();
  return 0;
}
```

> 5 4 3 2 1 0

Использование оператора goto в программах на Си без крайней необходимости не рекомендуется, поскольку это может повлечь за собой ряд ошибок, связанных с плохой читаемостью кода программы. Использование операторов цикла позволяет практически полностью исключить необходимость использования оператора goto.